\section{Bevezetés}

Ebben a részében a \textit{GTK+}-ban létrehozható különböző ablaktípusok közös vonásait, valamint az eltéréseik okait vesszük sorra. Kitérünk egyrészről az egyes ablaktípusok létrehozásának sajátosságaira, azok \textit{widget}ekkel való feltöltésére, másrészről a felhasználó interakciók kezelésére, ezzel együtt az ablakok bezárásának módjaira is, szem előtt tartva természetese a \textit{C}, illetve a \textit{C++} nyelvű változat azonosságait, különbözőségeit.

\subsection{Alapfogalmak}

\subsubsection{\textit{Popup} és \textit{toplevel} ablakok}

A \textit{popup} ablakra, mint típusra ugyan ritkán lesz közvetlenül szükségünk, érdemes tudni, hogy a \textit{GTK+} -- mint látszik -- ebben a tekintetben két fajta ablakot különböztet meg. A \textit{popup} (felugró, felbukkanó) ablakokat, melyekre -- valamilyen speciális célt szolgáló saját készítésű \textit{widget}ektől eltekintve -- csak néhány példa létezik (\textit{menu}, \textit{tooltip}), valamint a \textit{toplevel} (legkülső, legfelső szintű) ablakokat, melyek csaknem minden \textit{GTK+}-s, illetve saját fejlesztésű ablak alapjául szolgálnak. Ha tehát az ablakra, illetve a hozzá kapcsolódó fogalmakra gondolunk, többségében egy \textit{toplevel} ablakra gondolunk, és nem a \textit{popup}\footnote{Más eszközkészletek a ``popups'' gyűjtőfogalom alá sorolják a dialógusokat, a \textit{GTK+} esetén azonban egy dialógus ablak mindig egy \textit{toplevel}} típusúakra, melyekről talán nem is feltételeznénk első ránézésre, hogy ablakok.

Az ablakkezelő ezt az információt használja fel annak eldöntésére, hogy az adott ablakot milyen kerettel, dekorációval lássa el, illetve általánosságban menedzselje e a konkrét ablakot. Utóbbi -- azaz a \textit{toplevel} ablakok -- esetben alapértelmezetten az ablakkezelő keretet, illetve a beállításoktól függően azon például bezáró, teljes mértre váltó, minimalizáló gombot jelenít meg. A \textit{popup} típusú ablakokat az ablakkezelő nemcsak hogy nem dekorálja, de nem is menedzseli, következésképp tehát számos -- az ablakkezelő hatáskörébe tartozó -- funkció, mint amilyen például a minimalizálás, vagy a maximalizálás nem is érhető el. Bár kézenfekvő megoldásnak látszik a \textit{popup} típus arra, ha egy dekoráció nélküli ablakot készítsünk, mégse ezt tegyük, az ilyen típusú megjelenésbeli sajátosságok beállítására léteznek külön függvények.

Minden \textit{window} egyben konténer is, pontosabban fogalmazva egy \textit{bin}, azaz nem túl meglepő módon tartalmazhat egy további elemet gyerekként, ami természetesen szintén lehet egy konténer, így biztosítva, hogy számos elemet helyezhessünk el az elkészített ablakon belül.

\subsubsection{\textit{Window} és \textit{dialóg}}

A \textit{window} típus -- azon belül is ahogy tárgyaltuk a \textit{toplevel window} -- közvetlen szülője a \textit{dialog} típusnak, számottevő különbség tulajdonképpen nincs is a kettő között. Egy \textit{dialog} nem más, mint egy olyan \textit{window}, melybe a \textit{GTK+} fejlesztői néhány hasznos elemet helyeztek el. Konkrétabban fogalmazva minden dialógba egy függőleges elrendezésű konténer \textit{widget} (\textit{VBox}), abba pedig egy, a gombok elhelyezésére szolgáló konténer (\textit{HButtonBox} típusú \texttt{action\_area}), valamint egy szeparátor (\textit{HSpearator}) kerül, ebben a sorrendben mindkét esetben a konténer aljára helyezve\footnote{A \textit{VBox} típus \texttt{pack\_end()} függvényét hívva.}. Ebből következik, hogy minden, amit egy dialógusba -- annak elkészült után -- tenni akarunk az a gombsor, valamint a vízszintes szeparátor fölött jelenik meg, függetlenül attól, hogy azt a \texttt{pack\_start()}, vagy a \texttt{pack\_end()} függvény segítségével helyezzük el a konténerben.

A \textit{dialog} típus tehát -- a szeparátor által -- függőlegesen ketté osztott \textit{window}, ahol az alsó rész (\texttt{action\_area}), ami általában a gombokat tartalmazza (pl: Ok, Mégse, Súgó, \dots), a felső (\texttt{content\_area}) pedig azokat az elemeket tartalmazza, amik a felhasználói számára a szükséges akcióhoz (pl: adatbevitel, hibaüzenet megjelenítése, \dots) szükséges.

\subsubsection{Modalitás}

Ha nem az általunk írt applikáció fő ablakát készítjük éppen, csak ritkán van arra szükség, hogy a felhasználó hozzáférhessen a már korábban megjelenített ablakokhoz. A több ablakkal történő párhuzamos interakció tiltására szolgál a \textit{modal} tulajdonság. Amennyiben egy ablak ``modális'' csak az abban az ablakban elhelyezkedő \textit{widget}ekbe történhet bevitel, csak azokon váltódhat ki valamilyen esemény. Ezt kihasználva biztosíthatjuk például, hogy egy beviteli ablak\footnote{Amilyen például a \textit{szerkesztés} menüpontok \textit{beállítások} almenüjének hatására megjelenő ablak.} programból történő bezárásáig ne változzon semmi -- felhasználó által módosítható \textit{widget} tartalma -- a háttérben.

\subsubsection{Tranziencia}

Amennyiben azt szeretnénk elérni, hogy újonnan létrejött ablakunk az applikáció főablaka, vagy egy akár egy másik korábban létrehozott ``modális'' ablak fölött jelenjen meg, ezt azáltal érhetjük el, hogy a már létező ablakot az új ablak ``tranzienseként'' adjuk meg.

\section{Létrehozás}

\subsection{Paraméterek}

\input{sources/highlight.sty}
\begin{center}
\begin{tiny}
\ttfamily
\parbox[t]{0.48 \textwidth}{
\include{sources/dialog_create_gtk}
}
\parbox[t]{0.44 \textwidth}{
\include{sources/dialog_create_gtkmm}
}
\end{tiny}
\end{center}

\subsubsection{Pozíció}

\subsection{Tartalmi elemek}

\subsection{Vezérlő elemek}

\subsection{Megjelenés}

\section{Első ablakunk háttere}

\subsection{A kód}

Az ismétlés kedvéért -- no meg persze, hogy kéznél legyen -- lássuk most az előző számban már bemutatott példaprogramokat.


A fenti példaprogramok \textit{C/C++} nyelvű forrásfájljai, illetve azok eredetijei, a \textit{FLOSSzine}, valamint a \textit{GTK+}/\textit{gtkmm} oldalain az alábbi linkeken érhetőek el:
\ \\\\
\url{http://www.flosszine.org/sources/gtk_window.c}\\
\url{http://www.flosszine.org/sources/gtkmm_window.cc}\\
\url{http://library.gnome.org/devel/gtk-tutorial/stable/c39.html}\\
\url{http://www.gtkmm.org/docs/gtkmm-2.4/docs/tutorial/html/chapter-basics.html}

\subsection{Részletek sorról sorra}

\subsection{Vágyaink ablaka}

\subsubsection{Fordítás és linkelés}

A korábbiakhoz hasonlóan az alábbi parancssorok segítségével fordíthatóak e\-lem\-zett programjaink:

\fontsize{8pt}{8pt}
\ \\
\texttt{gcc gtk\_window.c -o gtk\_window \`{}pkg-config {-}-cflags {-}-libs gtk+-2.0}
\ \\
\texttt{g++ gtkmm\_window.cc -o gtkmm\_window \`{}pkg-config gtkmm-2.4 {-}-cflags {-}-libs\`{}}

\subsubsection{Futtatás}

Próbálkozzunk ezúttal is a \texttt{./gtk\_window}, illetve a \texttt{./gtkmm\_window} paranccsokkal abban a könyvtárban, ahol a fordítást elkövettük.

\subsubsection{Eredmény}

Bármily hihetetlen ezúttal sem történik semmi egyéb, mint az előző alkalommal. Remélhetőleg azonban a különbség mégis érzékelhető annyiban, hogy legutóbb a meglepetéssel teli borzongást ablakunk váratlan felbukkanása, míg most a bennünk szikraként felvillanó megértés okozza.

 
